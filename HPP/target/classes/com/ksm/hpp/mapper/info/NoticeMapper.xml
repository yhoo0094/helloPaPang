<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="mapper.info.NoticeMapper">
	
	<!-- 공지사항 조회-->
	<select id="selectNotice" parameterType="map" resultType="camelCaseMap">
		SELECT BOARD_SEQ				/*게시글일련번호*/
		     , NOTICE_TITLE 			/*공지사항제목*/
		     , NOTICE_CN				/*공지사항내용*/
		     , NOTICE_STR_DT			/*공지사항게시시작일*/
		     , NOTICE_END_DT			/*공지사항게시종료일*/
		     , NOTICE_POP_YN			/*공지사항팝업여부*/
		     , NOTICE_CN				/*공지사항내용*/
		     , NOTICE_HIT				/*공지사항조회수*/
		     , FST_REG_ID 				/*최초등록자ID*/
		     , DATE_FORMAT(FST_REG_DTTI, "%Y/%m/%d %H:%i") FST_REG_DTTI	/*최초등록일시*/
		     , LT_UPD_ID 				/*최종수정자ID*/
		     , DATE_FORMAT(LT_UPD_DTTI, "%Y/%m/%d %H:%i") LT_UPD_DTTI	/*최종수정일시*/
		  FROM TB_BOARD_NOTICE			/*테이블_공지사항*/
		 ORDER BY LT_UPD_DTTI DESC;
	</select>	
	
	<!-- 공지사항 등록 -->
	<insert id="insertNotice" parameterType="map">
		<selectKey resultType="integer" keyProperty="boardSeq" order="BEFORE">
			SELECT nextval('BOARD_SEQ') FROM DUAL
		</selectKey>	
		INSERT 
		  INTO TB_BOARD_NOTICE		/*테이블_공지사항*/
		     (
		       BOARD_SEQ			/*게시글일련번호*/
		     , NOTICE_TITLE 		/*공지사항제목*/
		     , NOTICE_CN			/*공지사항내용*/
		     , NOTICE_STR_DT		/*공지사항게시시작일*/
		     , NOTICE_END_DT		/*공지사항게시종료일*/
		     , NOTICE_POP_YN		/*공지사항팝업여부*/
		     , FST_REG_ID 			/*최초등록자ID*/
		     , LT_UPD_ID 			/*최종수정자ID*/
		     )
		VALUES
			 (
			   #{boardSeq}	
			 , #{noticeTitle}	
			 , #{noticeCn}
			 , #{noticeStrDt}
			 , #{noticeEndDt}
			 , #{noticePopYn}
		     , #{loginInfo.id} 	
		     , #{loginInfo.id}		 
			 )   
	</insert>
	
	<!-- 공지사항 수정 -->
	<update id="updateNotice" parameterType="map">
		UPDATE TB_BOARD_NOTICE						/*테이블_공지사항*/
		   SET NOTICE_TITLE		= #{noticeTitle}	/*공지사항제목*/
		     , NOTICE_CN		= #{noticeCn}		/*공지사항내용*/
		     , NOTICE_STR_DT	= #{noticeStrDt}	/*공지사항게시시작일*/
		     , NOTICE_END_DT	= #{noticeEndDt}	/*공지사항게시종료일*/
		     , NOTICE_POP_YN	= #{noticePopYn}	/*공지사항팝업여부*/
		     , LT_UPD_ID 		= #{loginInfo.id}	/*최종수정자ID*/
		     , LT_UPD_DTTI		= NOW() 			/*최종수정일시*/
		 WHERE BOARD_SEQ		= #{boardSeq}		/*게시글일련번호*/    
	</update>
	
	
	<update id="test" parameterType="map">
		UPDATE test						/*테이블_공지사항*/
		   SET NOTICE_TITLE		= #{noticeTitle}	/*공지사항제목*/
		     , NOTICE_CN		= #{noticeCn}		/*공지사항내용*/
		     , NOTICE_STR_DT	= #{noticeStrDt}	/*공지사항게시시작일*/
		     , NOTICE_END_DT	= #{noticeEndDt}	/*공지사항게시종료일*/
		     , NOTICE_POP_YN	= #{noticePopYn}	/*공지사항팝업여부*/
		     , LT_UPD_ID 		= #{loginInfo.id}	/*최종수정자ID*/
		     , LT_UPD_DTTI		= NOW() 			/*최종수정일시*/
		 WHERE BOARD_SEQ		= #{boardSeq}		/*게시글일련번호*/    
	</update>	
	
	<!-- 게시글 삭제 -->
	<delete id="deleteNotice" parameterType="map">
		DELETE
		  FROM TB_BOARD_NOTICE						/*테이블_공지사항*/
		 WHERE BOARD_SEQ		= #{boardSeq}		/*게시글일련번호*/
	</delete>

</mapper>