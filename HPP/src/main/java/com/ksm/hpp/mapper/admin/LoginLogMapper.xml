<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="mapper.admin.LoginLogMapper">
	
	<!-- 사용자 접속 기록 조회-->
	<select id="selectLoginLog" parameterType="map" resultType="camelCaseMap">
		SELECT T1.LOG_LOGIN_ID				/*로그인식별번호*/
		     , DATE_FORMAT(T1.LOGIN_DTTI, '%Y/%m/%d %H:%i:%s') AS LOGIN_DTTI 				/*로그인일시*/
		     , T1.USER_ID					/*사용자아이디*/
		     , T1.USER_IP					/*사용자아이피*/
		     , T1.LOGIN_CODE				/*로그인코드*/
		     , T2.CODE_DETAIL_VAL AS LOGIN_CODE_NM			/*로그인코드명*/
		  FROM TB_LOG_LOGIN T1				/*테이블_로그_로그인*/
		 INNER JOIN TB_CODE_DETAIL T2
    		ON T2.CODE_GROUP_TXID = 'LOGIN_CODE'
		   AND T1.LOGIN_CODE = T2.CODE_DETAIL_ID	
		<trim prefix="WHERE" prefixOverrides="AND">  
			<if test='userId != null and userId != ""'>
				AND USER_ID = #{userId}
			</if>
		</trim>
		 ORDER BY LOGIN_DTTI DESC
	</select>
</mapper>