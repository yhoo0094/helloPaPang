DROP TABLE IF EXISTS `TB_BOARD`;

CREATE TABLE `TB_BOARD` (
	`BIZ_ID`	VARCHAR(10)	NOT NULL	COMMENT '글ID',
	`BOARD_TITLE`	VARCHAR(300)	NULL	COMMENT '제목',
	`BOARD_CN`	LONGTEXT	NULL	COMMENT '내용',
	`BOARD_TYPE`	CHAR(4)	NULL	COMMENT '분류(0101:공지사항, 0102:팝업공지, 0201:자유게시판,0301:질문게시판)',
	`BOARD_HIT`	INT	NULL	COMMENT '조회수',
	`FST_REG_ID`	varchar(20)	NOT NULL	COMMENT '최초등록자ID',
	`FST_REG_DTTI`	TIMESTAMP	NOT NULL	DEFAULT NOW()	COMMENT '최초등록일시',
	`LT_UPD_ID`	varchar(20)	NOT NULL	COMMENT '최종수정자ID',
	`LT_UPD_DTTI`	TIMESTAMP	NOT NULL	DEFAULT NOW()	COMMENT '최종수정일시'
);

DROP TABLE IF EXISTS `TB_ATCFILE`;

CREATE TABLE `TB_ATCFILE` (
	`ATCFILE_SEQ`	INT	NOT NULL	COMMENT '첨부파일 순번',
	`BIZ_ID`	VARCHAR(10)	NOT NULL	COMMENT '글ID',
	`BIZ_DVCD`	VARCHAR(3)	NULL	COMMENT '업무구분코드(000:대분류,중분류,소분류)',
	`ATC_FILE_NM`	VARCHAR(300)	NULL	COMMENT '파일명',
	`SAVE_ATC_FILE_NM`	VARCHAR(320)	NULL	COMMENT '파일 저장명',
	`ATC_FILE_PATH`	VARCHAR(600)	NULL	COMMENT '파일 경로',
	`ATC_FILE_CAPA_VAL`	BIGINT	NULL	COMMENT '파일 용량',
	`ATC_FILE_EXTS`	VARCHAR(10)	NULL	COMMENT '파일 확장자',
	`FST_REG_ID`	varchar(20)	NOT NULL	COMMENT '최초등록자ID',
	`FST_REG_DTTI`	TIMESTAMP	NOT NULL	DEFAULT NOW()	COMMENT '최초등록일시',
	`LT_UPD_ID`	varchar(20)	NOT NULL	COMMENT '최종수정자ID',
	`LT_UPD_DTTI`	TIMESTAMP	NOT NULL	DEFAULT NOW()	COMMENT '최종수정일시'
);

DROP TABLE IF EXISTS `TB_SEQUENCE`;

CREATE TABLE `TB_SEQUENCE` (
	`SEQ_NM`	VARCHAR(30)	NOT NULL	COMMENT '시퀀스명',
	`CURRVAL`	BIGINT	NULL	COMMENT '현재 값'
);

DROP TABLE IF EXISTS `TB_USER`;

CREATE TABLE `TB_USER` (
	`USER_ID`	VARCHAR(20)	NOT NULL	COMMENT '아이디',
	`USER_PW`	VARCHAR(50)	NOT NULL	COMMENT '비밀번호',
	`USER_NAME`	VARCHAR(30)	NULL	COMMENT '이름',
	`BIRTH`	VARCHAR(8)	NULL	COMMENT '생년월일',
	`PHONE`	VARCHAR(11)	NULL	COMMENT '연락처_01000000000',
	`POST`	VARCHAR(20)	NULL	COMMENT '우편번호',
	`ADDR_1`	VARCHAR(300)	NULL	COMMENT '상세주소1',
	`ADDR_2`	VARCHAR(300)	NULL	COMMENT '상세주소2',
	`BANK`	VARCHAR(50)	NULL	COMMENT '계좌은행',
	`ACCOUNT`	VARCHAR(50)	NULL	COMMENT '계좌번호',
	`SIGNUP_DT`	VARCHAR(8)	NULL	COMMENT '가입일',
	`STATUS`	VARCHAR(2)	NULL	DEFAULT '1'	COMMENT '상태(01:활동중,02:정지,03:탈퇴)',
	`GENDER`	VARCHAR(1)	NULL	COMMENT '성별(1:남,2:여)',
	`EMAIL`	VARCHAR(50)	NULL	COMMENT '이메일',
	`PIC`	VARCHAR(200)	NULL	COMMENT '사진',
	`USE_YN`	VARCHAR(1)	NOT NULL	DEFAULT 'Y'	COMMENT '사용여부',
	`RMRK`	VARCHAR(300)	NULL	COMMENT '비고',
	`PW_CH_DTTI`	TIMESTAMP	NOT NULL	DEFAULT NOW()	COMMENT '비밀번호 최종수정일시',
	`PW_BF`	VARCHAR(50)	NULL	COMMENT '이전 비밀번호',
	`PW_ERR_CNT`	VARCHAR(1)	NOT NULL	DEFAULT '0'	COMMENT '비밀번호 오입력 횟수',
	`PW_INIT_YN`	VARCHAR(1)	NOT NULL	DEFAULT 'N'	COMMENT '비밀번호 초기화 여부',
	`FST_REG_ID`	VARCHAR(20)	NOT NULL	COMMENT '최초등록자ID',
	`FST_REG_DTTI`	TIMESTAMP	NOT NULL	DEFAULT NOW()	COMMENT '최초등록일시',
	`LT_UPD_ID`	VARCHAR(20)	NOT NULL	COMMENT '최종수정자ID',
	`LT_UPD_DTTI`	TIMESTAMP	NOT NULL	DEFAULT NOW()	COMMENT '최종수정일시'
);

ALTER TABLE `TB_BOARD` ADD CONSTRAINT `PK_TB_BOARD` PRIMARY KEY (
	`BIZ_ID`
);

ALTER TABLE `TB_ATCFILE` ADD CONSTRAINT `PK_TB_ATCFILE` PRIMARY KEY (
	`ATCFILE_SEQ`,
	`BIZ_ID`
);

ALTER TABLE `TB_SEQUENCE` ADD CONSTRAINT `PK_TB_SEQUENCE` PRIMARY KEY (
	`SEQ_NM`
);

ALTER TABLE `TB_USER` ADD CONSTRAINT `PK_TB_USER` PRIMARY KEY (
	`USER_ID`
);

ALTER TABLE `TB_ATCFILE` ADD CONSTRAINT `FK_TB_BOARD_TO_TB_ATCFILE_1` FOREIGN KEY (
	`BIZ_ID`
)
REFERENCES `TB_BOARD` (
	`BIZ_ID`
);

